<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Buscador de Personas</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input { padding: 8px; margin: 5px 0; width: 300px; }
    ul { margin-top: 10px; }
  </style>
</head>
<body>

<h1>Buscar Persona</h1>

<input type="text" id="busqueda" placeholder="Escribe tu nombre o parte del nombre" />
<ul id="resultados"></ul>

<script>
  // ConfiguraciÃ³n de Supabase
  const supabaseUrl = 'https://oqzpnivpfnpoqeuewwza.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xenBuaXZwZm5wb3FldWV3d3phIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyNzkxNzAsImV4cCI6MjA2ODg1NTE3MH0.bFmCIxSRadItouzsl9KmjisCLlk8dms8KljA1vPDrJo'; // ya la tienes completa
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  const input = document.getElementById('busqueda');
  const resultados = document.getElementById('resultados');

  input.addEventListener('input', async () => {
    const texto = input.value.trim();

    if (texto.length < 2) {
      resultados.innerHTML = '';
      return;
    }
const { data, error } = await supabase
  .from('personas')
  .select('ID_PERSONAS, Nombre, Nota')
  .ilike('Nombre', `%${texto}%`);

if (error) {
  resultados.innerHTML = `<li>Error al buscar: ${error.message}</li>`;
  return;
}

if (data.length === 0) {
  resultados.innerHTML = '<li>No se encontraron coincidencias.</li>';
  return;
}

resultados.innerHTML = data.map(p =>
  `<li><strong>${p.Nombre}</strong> (ID: ${p.ID_PERSONAS}, Nota: ${p.Nota})</li>`
).join('');
    
  });
</script>

</body>
</html>
